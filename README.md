# Сивкова Екатерина ИТ-16. Лабораторная работа №4. Вариант 2.

# Задание 1
Обобщенные типы. Типовые переменные, <>.

## Задача 1
### Текст задачи
Обобщенная коробка.
Создайте сущность Коробка, которая обладает следующими характеристиками:
- Может хранить один произвольный объект в один момент времени.
- Объект можно получить и разместить на хранение в любой момент времени.
- Если объект забирают из коробки – ссылку на этот объект необходимо обнулить.
- Если объект кладут в коробку, но она не пуста – необходимо выкинуть исключение.
- Имеет метод проверки на заполненность.
- Методы класса должны работать с тем типом данных, который был указан во время создания объекта.
Создайте Коробку которая может хранить целочисленное значение, разместите туда число 3.
Передайте Коробку в какой-либо метод, извлеките значение, и выведите его на экран.

### Алгоритм решения
Класс GeneralizedBox<T> - это обобщенный (generic) класс, что позволяет ему работать с любым типом данных, указанным при создании экземпляра. Создано единственное поле obj  обобщенного типа T, что позволяет классу работать с любыми типами данных. Конструктор по умолчанию создает абсолютно пустую коробку, где поле obj инициализируется как null. Конструктор с параметрами позволяет создать коробку с уже размещенным внутри объектом, выполняет прямую инициализацию поля obj переданным значением. Конструктор копирования создает новую коробку как точную копию существующей, перед этим проверяя входной параметр на значение null. Геттер getObj() возвращает ссылку на объект obj без его удаления. Сеттер setObj(T obj) - метод для добавления объекта в коробку, вызывает busyBox() для проверки занятости. Если коробка не пуста, выбрасывается исключение, иначе объект сохраняется в поле obj. Метод take() позволяет взять объект из коробки. Сначала вызвает freeBox() для проверки наличия объекта. Если коробка пуста, выбрасывается исключение, иначе объект сохраняется во временную переменную, обнуляется поле obj и возвращается сохраненный объект. Метод isEmpty() - проверяет состояние коробки, возвращает true если поле obj содержит null, и false в противном случае. 
Переопределённый метод toString() выводит строковое представление состояния коробки. Также используются вспомогательные приватные методы. Метод busyBox() используется для проверки пред операцией добавления объекта. Если коробка не пуста (!isEmpty()), выбрасывает исключение с сообщением "Коробка уже занята!". Метод freeBox() используется для валидации перед операцией извлечения объекта. Если коробка пуста (isEmpty()), выбрасывает исключение с сообщением "Коробка пустая!".

Демонстрация работы класса в основной программе:
1. Создание экземпляра коробки - инициализируется пустая коробка, специализированная для работы с типом Integer, выводится сообщение для пользователя о создании;
2. Объявление переменной управления - int m для хранения выбора пользователя;
3. Вывод меню - отображаются все доступные операции с коробкой, чтение выбора пользователя;
4. Обработка команд (switch-case)
   - Команда 0: Завершение работы
   - Команда 1: Добавление объекта в коробку (приватный метод setBox())
   - Команда 2: Извлечение объекта из коробки (приватный метод takeBox())
   - Команда 3: Просмотр содержимого коробки (вызов toString())
  
Метод setBox(GeneralizedBox<Integer> box) запрашивает у пользователя ввод строки с числом, с помощью Validator.valIsInt() проверяет корректность введённых данных, при корректном вооде вызывает box.setObj(value) с преобразованным числом, иначе выбрасывает исключение с соответствующим сообщением.

Метод takeBox(GeneralizedBox<Integer> box) вызывает box.take() и выводит сообщение об извлечении объекта из коробки.

В классе Validator реализован метод valIsInt, который проверяет строковые значения на соответствие целочисленному формату. Сначала проверяет, что переданная ссылка не является null, далее выполняет двойную проверку:trim() - удаляет пробелы, а isEmpty() - проверяет, что после trim строка не пустая. parseInt() - статический метод класса Штеупук пробует преобразовать строку в целое число.

Программа обрабатывает следующие исключения:
1. IllegalStateException - при попытке добавить в занятую или извлечь из пустой коробки;
2. NumberFormatException - при невалидном вводе числа;
3. IllegalArgumentException - при некорректных параметрах.

#### Тестирование
1. Создана коробка box1 для целых чисел.
2.  Введите номер дейсвия:
 - 0.Завершить действия с коробкой.
 - 1.Положить объект в коробку.
 - 2.Взять объект из коробки.
 - 3.Посмотреть содержимое коробки.
- 1
3. Введите целое число, которое необходимо добавить в box1: 3
  - Число 3 добавлено в коробку box1.
4. Введите номер дейсвия:
 - 0.Завершить действия с коробкой.
 - 1.Положить объект в коробку.
 - 2.Взять объект из коробки.
 - 3.Посмотреть содержимое коробки.
- 1

//Второй объект в ту же коробку.

5. Введите целое число, которое необходимо добавить в box1: 5
 - Ошибка: Коробка уже занята!
6. Введите номер дейсвия:
 - 0.Завершить действия с коробкой.
 - 1.Положить объект в коробку.
 - 2.Взять объект из коробки.
 - 3.Посмотреть содержимое коробки.
- 2
- Из коробки извлекли значение: 3
7. Введите номер дейсвия:
 - 0.Завершить действия с коробкой.
 - 1.Положить объект в коробку.
 - 2.Взять объект из коробки.
 - 3.Посмотреть содержимое коробки.
- 2

//Извлекаем объект из пустой коробки.

- Ошибка: Коробка пустая!
8. Введите номер дейсвия:
 - 0.Завершить действия с коробкой.
 - 1.Положить объект в коробку.
 - 2.Взять объект из коробки.
 - 3.Посмотреть содержимое коробки.
- 1

//Некорректное значение объекта.

9. Введите целое число, которое необходимо добавить в box1: 4па
- Ошибка: введите корректное целое число!
10. Введите целое число, которое необходимо добавить в box1: -10
- Число -10 добавлено в коробку box1.
11. Введите номер дейсвия:
 - 0.Завершить действия с коробкой.
 - 1.Положить объект в коробку.
 - 2.Взять объект из коробки.
 - 3.Посмотреть содержимое коробки.
- 3
- Содержимое коробки: -10
12. Введите номер дейсвия:
 - 0.Завершить действия с коробкой.
 - 1.Положить объект в коробку.
 - 2.Взять объект из коробки.
 - 3.Посмотреть содержимое коробки.
- 2
- Из коробки извлекли значение: -10
13. Введите номер дейсвия:
 - 0.Завершить действия с коробкой.
 - 1.Положить объект в коробку.
 - 2.Взять объект из коробки.
 - 3.Посмотреть содержимое коробки.
- 3
- Содержимое коробки: пусто
14. Введите номер дейсвия:
 - 0.Завершить действия с коробкой.
 - 1.Положить объект в коробку.
 - 2.Взять объект из коробки.
 - 3.Посмотреть содержимое коробки.
- 0
- Работа с коробкой box 1 завершена.

## Задача 3
### Текст задачи
Сравнимое.
Создайте ссылочный тип Сравнимое, гарантирующий наличие по данной ссылке метода со
следующими характеристиками:
- Называется “сравнить”
- Принимает объект.
- Тип принимаемого объекта может быть изменен без изменения самого Сравнимого.
- Возвращает целое число.

### Алгоритм решения
Обобщённый интерфейс MyComparable<T> предоставляет способ сравнения объектов различных типов. Параметризация типом T - позволяет работать с любыми типами данных. Метод compare - гарантирует наличие логики сравнения. Возвращается целочисленный результат: 1 (больше), -1 (меньше), 0 (равно). Для демонстрации созданы классы ComparableNumber для реализации числовых типов и ComparableString для реализации строковых типов. Оба класса используют наследование - implements MyComparable<String> и содержат методы compare(), реализующие алгоритм сравнения.

Демонстрация работы класса в основной программе:
1. Пользователь выбирает одну из доступных операций сравнения;
2. Обработка выбора через switch-case
   - Команда 0: Завершение работы
   - Команда 1: Сравнение чисел (Ввод и валидация двух чисел любых типов, создание объектов ComparableNumber, выполнение сравнения, вывод результата)
   - Команда 2: Сравнение строк (Ввод двух строк, создание объектов ComparableString, сравнение двух созданных объектов, вывод результата).
  
Для проверки корректности введённых для сравнения чисел в классе Validator реализованы методы valIsInt(String value) - проверка строки на соответствие целочисленному формату, valIsDouble(String value) - проверка строки на соответствие формату чисел с плавающей точкой, valIsNumber(String value) - проверка на числовой формат (целый или дробный).

Приватный метод parseNumber(String str) принимает строку, определяет тип числа, содержащегося в строке и возвращает число соответствующего типа (int или double).

Метод resultCompare(int result) преобразовывает числовой код в символ:
- 1 → ">" (больше)
- -1 → "<" (меньше)
- 0 → "=" (равно)

#### Тестирование
1. Введите номер дейсвия:
 - 0.Завершить программу для сравнения.
 - 1.Сравнить два числа.
 - 2.Сравнить две строки.
- 1
2. Введите первое число: 729
3. Введите второе число: 729.0
- 729.0 = 729.0
4. Введите номер дейсвия:
 - 0.Завершить программу для сравнения.
 - 1.Сравнить два числа.
 - 2.Сравнить две строки.
- 1
5. Введите первое число: 68.1
6. Введите второе число: -83
- 68.1 > -83.0
7. Введите номер дейсвия:
 - 0.Завершить программу для сравнения.
 - 1.Сравнить два числа.
 - 2.Сравнить две строки.
- 1
8. Введите первое число: b23z
- Ошибка: введите корректное число!
- Введите первое число: -9
9. Введите второе число: 32dwz7
- Ошибка: введите корректное число!
10. Введите второе число: 82.238
- -9.0 < 82.238
11. Введите номер дейсвия:
 - 0.Завершить программу для сравнения.
 - 1.Сравнить два числа.
 - 2.Сравнить две строки.
- 2
12. Введите первую строку: vj32
13. Введите вторую строку: 9zhl
- vj32 > 9zhl
14. Введите номер дейсвия:
- 0.Завершить программу для сравнения.
 - 1.Сравнить два числа.
 - 2.Сравнить две строки.
- 2
15. Введите первую строку: abc
16. Введите вторую строку: abc
- abc = abc
17. Введите номер дейсвия:
 - 0.Завершить программу для сравнения.
 - 1.Сравнить два числа.
 - 2.Сравнить две строки.
- 2
18. Введите первую строку: Abc
19. Введите вторую строку: abc
- Abc < abc
20. Введите номер дейсвия:
 - 0.Завершить программу для сравнения.
 - 1.Сравнить два числа.
 - 2.Сравнить две строки.
- 0
- Работа программы для сравнения завершена.

# Задание 2
Параметризации. Маски типов и их ограничения.

## Задача 2
### Текст задачи
Поиск максимума.
Создайте метод, принимающий набор Коробок из задачи 3.1.1 и возвращающий максимальное из их значений в формате double. Принимаемые методом Коробки могут быть параметризованы любыми видами чисел.

### Алгоритм решения

#### Тестирование

# Задание 3
Обобщенные методы. Автовывод типа.

## Задача 1
### Текст задачи
Функция.
Разработайте такой метод, который будет принимать список значений типа T, и объект имеющий единственный метод apply. Данный метод надо применить к каждому элементу списка, и вернуть новый список значений типа P, при этом типы T и P могут совпадать, а могут не совпадать.
Используйте разработанный метод следующим образом:
1. Передайте в метод список со значениями:“qwerty”, “asdfg”, “zx”, а получите список чисел, где каждое число соответствует длине каждой строки.
2. Передайте в метод список со значениями: 1,-3,7, а получите список в котором все отрицательные числа стали положительными, а положительные остались без изменений.
3. Передайте в метод список состоящий из массивов целых чисел, а получите список в котором будут только максимальные значения каждого из исходных массивов.

### Алгоритм решения

#### Тестирование

## Задача 2
### Текст задачи
Фильтр.
Разработайте такой метод, который будет принимать список значений типа T и объект имеющий единственный метод test (принимает T и возвращает boolean). Верните новый список типа T, из которого удалены все значения не прошедшие проверку условием.
Используйте разработанный метод следующим образом:
1. Передайте в метод список со значениями: “qwerty”, “asdfg”, “zx”, и отфильтруйте все строки имеющие менее трех символов.
2. Передайте в метод список со значениями: 1,-3,7, и отфильтруйте все положительные элементы.
3. Передайте в метод список состоящий из массивов целых чисел, а получите список в котором будут только те массивы, в которых нет ни одного положительного элемента.

### Алгоритм решения

#### Тестирование

## Задача 3
### Текст задачи
Сокращение.
Разработайте такой метод, который будет принимать список значений типа T и способ с помощью которого список значений можно свести к одному значению типа T, которое и возвращается из метода.
Используйте разработанный метод следующим образом:
1. Передайте в метод список со значениями: “qwerty”, “asdfg”, “zx”, и сформируйте одну большую строку, которая состоит из всех строк исходного списка.
2. Передайте в метод список со значениями: 1,-3,7, и верните сумму всех значений исходного списка.
3. Имеется список, состоящий из списков целых чисел, получите общеe количество элементов во всех списках. Подсказка: решить задачу можно в одно действие или последовательно использовать методы из 3.3.1 и 3.3.3.
Далее необходимо изменить разработанный метод таким образом, чтобы данный метод гарантированно не возвращал null и не выбрасывал ошибок в том случае, если исходный список пуст.

### Алгоритм решения

#### Тестирование

## Задача 4
### Текст задачи
Коллекционирование.
Разработайте такой метод, который будет возвращать коллекцию типа P со значениями типа T.
Данный метод будет принимать:
1. Список исходных значений.
2. Способ создания результирующей коллекции.
3. Способ передачи значений исходного списка в результирующую коллекцию.
Используйте разработанный метод следующим образом:
1. Передайте в метод список со значениями: 1,-3,7, и верните их разбитыми на два подсписка, в одном из которых будут только положительные числа, а в другом только отрицательные.
2. Передайте в метод список со значениями: “qwerty”, “asdfg”, “zx”, “qw” и верните их разбитыми на подсписки таким образом, чтобы в любом подсписке были строки только одинаковой длины.
3. Передайте в метод список со значениями: “qwerty”, “asdfg”, “qwerty”, “qw” и верните набор такого вида, который не может содержать одинаковые объекты.
   
### Алгоритм решения

#### Тестирование
